#!/usr/bin/env bash

export SESSION_COOKIE_NAME="_semaphoreci_2_0_prod_session"

if [ -z $SESSION_COOKIE_VALUE ]; then
  echo "SESSION_COOKIE_NAME is not exported"
  exit 1
fi

#
# Follow live log in the background
#
bash src/live_log.sh &
sleep 10

#
# Open important pages continuosly
#

while true; do
  # Generate output
  bash src/generate_output.sh

  # Visit pages
  bash src/job_page.sh
  bash src/pipeline_page.sh
  bash src/branch_page.sh

  sleep 10
done
